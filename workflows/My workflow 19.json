{
  "active": false,
  "connections": {
    "When clicking ‘Test workflow’": {
      "main": [
        [
          {
            "node": "Get Units",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Units": {
      "main": [
        [
          {
            "node": "Get Properties",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Properties": {
      "main": [
        [
          {
            "node": "Format Update",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Update": {
      "main": [
        [
          {
            "node": "Split In Batches",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split In Batches": {
      "main": [
        [],
        [
          {
            "node": "Update Unit",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-04-12T10:36:18.553Z",
  "id": "X0UeUCFUK1fBxNnD",
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "My workflow 19",
  "nodes": [
    {
      "parameters": {},
      "id": "318303af-9acf-4494-9c7b-ed326e4d65c1",
      "name": "When clicking ‘Test workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        0,
        0
      ]
    },
    {
      "parameters": {
        "databaseId": 170,
        "tableId": 700,
        "returnAll": true,
        "additionalOptions": {}
      },
      "id": "aa1426f8-a7e6-4cd7-a1b3-6359ca7f958b",
      "name": "Get Units",
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        180,
        0
      ],
      "credentials": {
        "baserowApi": {
          "id": "5zW4AD0Cpmzo8h8d",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "databaseId": 170,
        "tableId": 699,
        "returnAll": true,
        "additionalOptions": {}
      },
      "id": "3f954432-4a32-42e0-9eba-09dc8647b91e",
      "name": "Get Properties",
      "type": "n8n-nodes-base.baserow",
      "typeVersion": 1,
      "position": [
        360,
        0
      ],
      "credentials": {
        "baserowApi": {
          "id": "5zW4AD0Cpmzo8h8d",
          "name": "Baserow account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const unit = $json;\nconst properties = $items(\"Get Properties\", 0).map(i => i.json);\nconst propId = parseInt(unit[\"Property ID\"]);\nconst match = properties.find(p => parseInt(p[\"Property ID\"]) === propId);\n\nreturn [{\n  json: {\n    unitRowId: unit.id,\n    linkedProperty: match ? [match.id] : []\n  }\n}];"
      },
      "id": "15670b27-e917-4a82-bd59-38361e3910a2",
      "name": "Format Update",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        560,
        0
      ]
    },
    {
      "parameters": {
        "batchSize": 20,
        "options": {}
      },
      "id": "898cbbe8-521b-437a-80a2-4ebe7b7b85cb",
      "name": "Split In Batches",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        740,
        0
      ]
    },
    {
      "parameters": {
        "authentication": "headerAuth",
        "requestMethod": "PATCH",
        "url": "=https://base.blazeproperty.com/api/database/rows/table/699/{{$json.unitRowId}}/",
        "jsonParameters": true,
        "options": {
          "bodyContentType": "json"
        },
        "bodyParametersJson": "={ \"field_7153\": [{{$json.linkedProperty}}] }"
      },
      "id": "079f0be7-9c26-4c4f-a68f-e8e6d493d9fe",
      "name": "Update Unit",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [
        960,
        0
      ],
      "credentials": {
        "httpHeaderAuth": {
          "id": "HTGHTGVhQpvKZvdW",
          "name": "baserow"
        }
      }
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-04-12T10:36:18.553Z",
  "versionId": "823041bf-7111-497d-ba48-f468dfb61689"
}